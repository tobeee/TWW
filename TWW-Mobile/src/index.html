<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport'>
    <title>The Written World</title>
    <link href="css/all.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="js/all.js" type="text/javascript"></script>
    <script src="https://trigger.io/catalyst/target/target-script-min.js#9CD35E12-C618-4F71-A599-33DE95B6762E" type="text/javascript"></script>
    <script>
      window.forge.enableDebug();
    </script>
    <script src="js/link.js" type="text/javascript"></script>
  </head>
  <body>
    <div id='tww-notifications' style='display: none'>
      <ul class='large-list' id='tww-notifications-list'></ul>
    </div>
    <div id='tww-transition-buffer' style='display: none'></div>
    <div id='tww-main'></div>
    <script>window.JST || (JST = {});JST['chapter'] = _.template("<div class=\"chapter\">\n  <header>\n    <h1><%= chapter.name %></h1>\n    <h2>Chapter <%= index + 1 %></h2>\n  </header>\n\n  <div class=\"chapter-description record-text\">\n    <%= tww.h.simpleFormat(_.escape(chapter.desc)) %>\n  </div>\n\n  <div class=\"chapter-location-description\">\n    <h3 class=\"chapter-location-name\"><%= mapTile.get('name') %></h3>\n    <%= tww.h.simpleFormat(mapTile.escape('desc')) %>\n  </div>\n\n  <% _.tap(mapTile.exits(), function(exits) { %>\n    <% if (!_.isEmpty(exits)) { %>\n      <ul class=\"bulleted-list chapter-location-exits\">\n        <% _.each(mapTile.exits(), function(exit) { %>\n          <li><%= exit[1].get('name') %> is to the <%= exit[0] %></li>\n        <% }); %>\n      </ul>\n    <% } %>\n  <% }); %>\n\n  <% if (!_.isEmpty(chapter.objectives)) { %>\n    <%= tww.t.objectives_list({objectives: chapter.objectives}) %>\n  <% } %>\n\n  <% if (!_.isEmpty(mapTile.get('items'))) { %>\n    <%= tww.t.items_list({items: mapTile.get('items')}) %>\n  <% } %>\n\n  <% if (!_.isEmpty(mapTile.get('castPresent'))) { %>\n    <%= tww.t.cast_list({cast: mapTile.get('castPresent')}) %>\n  <% } %>\n\n  <%= tww.t.chapter_messages({messages: messages}) %>\n</div>");
    JST['send_text_message'] = _.template("<% if (message.isRecordText()) { %>\n  <div class=\"record-text\">\n    <%= tww.h.simpleFormat(message.escape('sendText')) %>\n  </div>\n<% } else if (message.isAction()) { %>\n  <div class=\"performed-action\">\n    <div class=\"spent-force-points\"><%= message.get('actions') %></div>\n    <%= message.escape('sendText') %>\n  </div>\n<% } else { %>\n  <div class=\"meta-text by-<%= message.get('who').toLowerCase() %>\">\n    <h3><%= _.capitalize(message.get('who')) %></h3>\n    <%= tww.h.simpleFormat(message.escape('sendText')) %>\n  </div>\n<% } %>");
    JST['character_editor/questions'] = _.template("<header>\n  <h1 class=\"large-heading\"><%= questions.name %></h1>\n  <h2>1/n</h2>\n</header>\n\n<p class=\"actions\">\n  <button>Another question</button>\n</p>");
    JST['character_editor/layout'] = _.template("<div class=\"top-nav\">\n  <div class=\"nav-row\">\n    <a id=\"character-editor-goto-body\">\n      Body\n    </a>\n    <a id=\"character-editor-goto-items\">\n      Items\n    </a>\n    <a id=\"character-editor-goto-purchased\">\n      Purchased\n    </a>\n  </div>\n</div>\n\n<div id=\"character-editor-body\" class=\"scrollable-container with-top-nav with-bottom-nav\"></div>\n\n<div class=\"bottom-nav\">\n  <div class=\"nav-row\">\n    <a id=\"character-editor-goto-name\">\n      Name\n    </a>\n    <a id=\"character-editor-goto-story\">\n      Story\n    </a>\n    <a id=\"character-editor-goto-looks\">\n      Looks\n    </a>\n    <a id=\"character-editor-save\">\n      Save\n    </a>\n  </div>\n</div>");
    JST['character_editor/main'] = _.template("<header>\n  <h1 class=\"large-heading\">Create Your Heroes</h1>\n  <h2>Start your story here</h2>\n</header>\n\n<div class=\"emboss character-edit-intro\">\n  <p>\n    This is the Hero Creation tool. From here you can create a brand new hero\n    to explore stories with, or make changes to a hero you already use. You\n    can buy your hero new clothes and items as well!\n  </p>\n</div>\n\n<div class=\"character-new-or-edit\">\n  <div class=\"character-new\">\n    <button class=\"button-tiny\">New</button>\n  </div>\n  <div class=\"character-edit\">\n    <button class=\"button-tiny\">Edit</button>\n  </div>\n</div>");
    JST['character_editor/name_and_gender'] = _.template("<form id=\"character-name-and-gender-form\">\n  <p class=\"form-field\">\n    <label for=\"character-name\">\n      What is your\n      <%= character.escape('archetype') %>\n      called?\n    </label>\n\n    <input type=\"text\" value=\"<%= character.escape('name') %>\" id=\"character-name\" name=\"name\" class=\"text-field\" autofocus>\n  </p>\n\n  <p class=\"form-field\">\n    <label for=\"character-gender\">\n      Is your\n      <%= character.escape('archetype') %>\n      a boy or a girl?\n    </label>\n\n    <select id=\"character-gender\" name=\"gender\">\n      <option value=\"m\" <% if (character.get('gender') == 'm') { %>selected<% } %>>Boy</option>\n      <option value=\"f\" <% if (character.get('gender') == 'f') { %>selected<% } %>>Girl</option>\n    </select>\n  </p>\n\n  <p class=\"form-actions\">\n    <button id=\"character-name-ok\" class=\"button-tiny\">OK</button>\n  </p>\n</form>");
    JST['character_editor/body_type'] = _.template("<div class=\"form-field\">\n  <label class=\"align-center\">Choose a body type for <%= name %></label>\n  <div class=\"character-body-types\">\n    <% _.each(bodyTypes, function(bodyType) { %>\n      <img src=\"/images/body-types/<%= bodyType.image %>\" data-id=\"<%= bodyType.id %>\" class=\"character-body-type\">\n    <% }); %>\n  </div>\n</div>\n\n<div class=\"form-actions\">\n  <button id=\"character-body-ok\" class=\"button-tiny\">OK</button>\n</div>");
    JST['character_editor/items/layout'] = _.template("<div class=\"character-edit-items-preview page book-right\">\n</div>\n\n<div class=\"character-edit-items-side-panel book-cover\">\n  <div class=\"force-points-container\">\n  </div>\n\n  <div class=\"section\">\n    <div class=\"section-header\">\n      Category\n    </div>\n  </div>\n</div>");
    JST['character_editor/archetype_picker'] = _.template("<div class=\"section-header align-center\">\n  What type of hero would you like to create?\n</div>\n\n<ul class=\"large-list\">\n  <% _.each(archetypes, function(archetype) { %>\n    <li class=\"archetype\" data-archetype-name=\"<%= archetype.name %>\">\n      <i class=\"list-item-icon\"></i>\n      <h2 class=\"archetype-name\"><%= archetype.name %></h2>\n      <p class=\"archetype-description\"><%= archetype.description %></p>\n    </li>\n  <% }); %>\n</ul>");
    JST['choose_hero'] = _.template("<header>\n  <h1 class=\"large-heading\">Choose a Hero</h1>\n</header>\n\n<ul class=\"character-list hero-list tabular-list\">\n  <% characters.each(function(c) { %>\n    <li class=\"hero tabular-list-row\" data-hero-id=\"<%= c.id %>\">\n      <i class=\"tabular-list-row-icon\"></i>\n      <div class=\"tabular-list-row-content\" title=\"Choose the Hero\"><%= c.get('name') %></div>\n    </li>\n  <% }); %>\n</ul>\n\n<div class=\"create-new-hero\">\n  <button class=\"button-small\"><i class=\"icon-plus\"></i></button>\n  Create a new Hero\n</div>");
    JST['completed_objective_message'] = _.template("<div class=\"completed-objective\">\n  <div class=\"gained-force-points\"><%= message.getObjective().get('fpValue') %></div>\n  &ldquo;<%= message.getObjective().get('name') %>&rdquo; complete!\n</div>");
    JST['heroes'] = _.template("<% _.each(collection, function(character) { %>\n  <a class=\"hero\" href=\"#characters/<%= character.id %>\" data-id=\"<%= character.id %>\">\n    <%= character.get('name') %>\n  </a>\n<% }); %>");
    JST['applied_to_join'] = _.template("<h1 class=\"large-heading\">You applied to Join</h1>\n\n<div class=\"button-large icon-left applied-to-join-story\">\n  <i class=\"icon\"></i>\n  <%= story.get('title') %>\n</div>\n\n<div class=\"button-large icon-right applied-to-join-hero\">\n  <i class=\"icon\"></i>\n  <small>With the Hero</small>\n  <%= hero.get('name') %>\n</div>\n\n<div class=\"button-large icon-left applied-to-join-god\">\n  <i class=\"icon\"></i>\n  <small>And the God</small>\n  God Name Here\n</div>\n\n<div class=\"page-actions\">\n  <button class=\"book-button applied-ok\">\n    <span title=\"OK\">OK</span>\n  </button>\n</div>");
    JST['story_writing_menu'] = _.template("<div class=\"force-points\">\n  <div class=\"force-points-counter\">\n    <div class=\"force-points-count\" title=\"<%= story.state.forcePoints %>\">\n      <%= story.state.forcePoints %>\n    </div>\n\n    <hr/>\n\n    <div class=\"force-points-available\">\n      Force Points available.\n    </div>\n  </div>\n\n  <div class=\"force-points-buy-more\">\n    Buy<br/>More\n  </div>\n</div>\n\n<hr/>\n\n<div class=\"objectives\">\n  <h2 title=\"Objectives\">Objectives</h2>\n\n  <ul class=\"objectives-list\">\n    <% story.state.objectives.each(function(objective) { %>\n      <li class=\"objective<% if (objective.get('current')) { %> current<% } %>\">\n        <div class=\"objective-force-points\">\n          <% if (objective.get('current')) { %>\n            &#10003;\n          <% } else { %>\n            <%= objective.get('fpValue') %>\n          <% } %>\n        </div>\n        <%= objective.get('name') %>\n      </li>\n    <% }); %>\n  </ul>\n</div>\n\n<hr/>\n\n<div class=\"inventory\">\n  <h2 title=\"Inventory\">Inventory</h2>\n\n  <ul class=\"items-list\">\n    <% story.state.inventory.each(function(item) { %>\n      <li class=\"item\"><%= item.get('name') %></li>\n    <% }); %>\n  </ul>\n</div>");
    JST['cast_list'] = _.template("<ul class=\"bulleted-list cast-list\">\n  <% _.each(cast, function(member) { %>\n    <li><%= member.name %> is here</li>\n  <% }); %>\n</ul>");
    JST['items_list'] = _.template("<ul class=\"bulleted-list items-list\">\n  <% _.each(items, function(item) { %>\n    <li><%= item.name %></li>\n  <% }); %>\n</ul>");
    JST['index/force_points'] = _.template("<div class=\"section-header\">\n  Your Force Points\n</div>\n<div class=\"force-points-content\">\n  <div class=\"force-points-content-left-wrapper\">\n    <div class=\"force-points-content-left\">\n      <div class=\"force-points-counter\">\n        <div class=\"force-points-count\">\n          <%= fp %>\n        </div>\n        <div class=\"force-points-available\">\n          Force Points available.\n        </div>\n      </div>\n      <button class=\"book-button force-points-buy-more\">\n        <span title=\"Buy More\">Buy More</span>\n      </button>\n    </div>\n  </div>\n  <div class=\"force-points-content-right\">\n    Force Points make the Written World go round.\n    When you do things in a story, you give Force\n    Points to the stories God. When you complete\n    Objectives, you earn more!\n  </div>\n</div>");
    JST['role_type_summary'] = _.template("<header>\n  <h1 class=\"role-type\">The Role of <%= story.get('hero_role_type').shortName %></h1>\n  <h2 class=\"role-type-subtitle\">A guide for the Heroic</h2>\n</header>\n\n<div class=\"role-type-description\">\n  <p>\n    <%= story.get('hero_role_type').description %>\n  </p>\n</div>\n\n<hr/>\n\n<h2>This story also has cast in:</h2>\n\n<ul class=\"character-list tabular-list\">\n  <% _.each(story.get('cast'), function(role) { %>\n    <li class=\"tabular-list-row\">\n      <i class=\"tabular-list-row-icon\"></i>\n      <div class=\"tabular-list-row-content\" title=\"The role of&hellip;\"><%= role.archetype %></div>\n    </li>\n  <% }); %>\n</ul>");
    JST['login'] = _.template("<button id=\"facebook-login-button\"></button>");
    JST['user_details'] = _.template("<div class=\"page\">\n  <header>\n    <h1>\n      <%= user.get('firstname') %>\n      <%= user.get('lastname') %>\n    </h1>\n    <h2>A library</h2>\n  </header>\n</div>");
    JST['play_encounter_message'] = _.template("<div class=\"encounter\">\n  <% _.tap(message.getEncounter(), function(encounter) { %>\n    <h3><%= encounter.name %></h3>\n\n    <div class=\"encounter-description\">\n      <%= tww.h.simpleFormat(message.getEncounter().desc) %>\n    </div>\n\n    <% if (!_.isEmpty(encounter.objectives)) { %>\n      <%= tww.t.objectives_list({objectives: encounter.objectives}) %>\n    <% } %>\n\n    <% if (!_.isEmpty(encounter.items)) { %>\n      <%= tww.t.items_list({items: encounter.items}) %>\n    <% } %>\n\n    <% if (!_.isEmpty(encounter.cast)) { %>\n      <%= tww.t.cast_list({cast: encounter.cast}) %>\n    <% } %>\n  <% }); %>\n</div>");
    JST['books'] = _.template("<% _.each(collection, function(story) { %>\n  <a class=\"book\" href=\"#stories/<%= story.id %>\">\n    <%= story.get('title') %>\n  </a>\n<% }); %>");
    JST['story_page'] = _.template("<% story.eachVisitedChapter(function(chapter, messages, mapTile, i) { %>\n  <%= tww.t.chapter({chapter: chapter, messages: messages, mapTile: mapTile, index: i}) %>\n<% }); %>");
    JST['force_points'] = _.template("<div class=\"force-points-counter\">\n  <div class=\"force-points-count\" title=\"<%= fp %>\">\n    <%= fp %>\n  </div>\n\n  <hr/>\n\n  <div class=\"force-points-available\">\n    Force Points available.\n  </div>\n</div>\n\n<div class=\"force-points-buy-more\">\n  Buy<br/>More\n</div>");
    JST['hero_details'] = _.template("<div class=\"page\">\n  <header>\n    <h1><%= hero.get('name') %></h1>\n    <h2>A library</h2>\n  </header>\n\n  <div class=\"hero-description\">\n    <img src=\"images/hero-large.png\" class=\"hero-avatar\" />\n    <%= tww.h.simpleFormat(hero.get('description')) %>\n  </div>\n</div>");
    JST['story_details'] = _.template("<header>\n  <h1 class=\"large-heading story-title\"><%= story.get('title') %></h1>\n  <h2 class=\"story-subtitle\">A story of <%= story.get('type') %></h2>\n</header>\n\n<div class=\"button-large story-god icon-left\">\n  <i class=\"icon\"></i>\n  <small>The God</small>\n  <%= story.getGodUser().get('firstname') %>\n  <%= story.getGodUser().get('lastname') %>\n</div>\n\n<div class=\"button-large story-hero icon-right\">\n  <i class=\"icon\"></i>\n  <% if (story.get('has_character')) { %>\n    <small>And the Hero</small>\n    <%= story.get('hero').storyName %>\n  <% } else { %>\n    <small>Needs a Hero to be</small>\n    <%= story.get('hero_role_type').name %>\n  <% } %>\n</div>\n\n<div class=\"button-large story-type icon-left\">\n  <i class=\"icon\"></i>\n  <% if (story.get('has_character')) { %>\n    <small>In a story of</small>\n  <% } else { %>\n    <small>For a story of</small>\n  <% } %>\n  <%= story.get('type') %>\n</div>\n\n<div class=\"page-actions\">\n  <% if (story.canApplyToJoin()) { %>\n    <button class=\"book-button story-action story-apply-to-join\">\n      <span title=\"Apply to Join\">Apply to Join</span>\n    </button>\n  <% } else if (story.appliedToJoin()) { %>\n    <button disabled=\"disabled\" class=\"book-button story-action story-apply-to-join\">\n      <span title=\"Apply to Join\">Apply to Join</span>\n    </button>\n  <% } else /* story has a character or is mine */ { %>\n    <button class=\"book-button story-action story-read\">\n      <span title=\"Read\">Read</span>\n    </button>\n  <% } %>\n</div>");
    JST['bookshelf'] = _.template("<div class=\"bookshelf-header section-header\">\n  <div class=\"bookshelf-header-buttons section-header-buttons\">\n    <% if (toggleButton) { %>\n      <button class=\"button-small bookshelf-toggle\"><i class=\"icon-chevron-down\"></i></button>\n    <% } %>\n    <% if (showAddButton) { %>\n      <button class=\"button-small bookshelf-add\"><i class=\"icon-plus\"></i></button>\n    <% } %>\n  </div>\n  <%= title %>\n</div>\n<div class=\"bookshelf-content-wrapper\">\n  <div class=\"bookshelf-content\">\n  </div>\n</div>");
    JST['story_type_summary'] = _.template("<header>\n  <h1>Stories of <%= type.name %></h1>\n  <h2>A guide for the Heroic</h2>\n</header>\n\n<div class=\"story-type-description\">\n  <%= tww.h.simpleFormat(type.description) %>\n</div>\n\n<hr />\n\n<div class=\"story-chapter-one\">\n  <h2>This story starts with&hellip;</h2>\n  <%= tww.h.simpleFormat(story.get('chapters')[0].desc) %>\n</div>");
    JST['notifications'] = _.template("<% notifications.each(function(notification) { %>\n  <li class=\"notification <%= notification.get('my_turn') ? 'notification-your-turn' : 'notification-accepted' %>\">\n    <i class=\"notification-icon list-item-icon\"></i>\n    <h2 class=\"notification-action\">\n      <%= notification.get('my_turn') ? \"It's your turn!\" : \"You were accepted!\" %>\n    </h2>\n    <p class=\"notification-subject\">\n      In &ldquo;<%= notification.get('title') %>&rdquo;\n    </p>\n  </li>\n<% }); %>");
    JST['chapter_messages'] = _.template("<div class=\"chapter-messages\">\n  <% _.each(messages, function(message, chapter) { %>\n    <% _.tap(tww.t[_.result(message, 'renderWith')], function(t) { %>\n      <% if (t) { %>\n        <%= t({message: message}) %>\n      <% } %>\n    <% }); %>\n  <% }); %>\n</div>");
    JST['objectives_list'] = _.template("<ul class=\"bulleted-list objectives-list\">\n  <% _.each(objectives, function(objective) { %>\n    <li>New Objective: &ldquo;<%= objective.name %>&rdquo;.</li>\n  <% }); %>\n</ul>");
    JST['map'] = _.template("<div class=\"map-container\">\n  <% map.each(function(tile, x, y) { %>\n    <div id=\"map-tile-<%= x %>-<%= y %>\" class=\"map-tile <%= tile.get('visited') ? 'visited' : '' %>\" style=\"left: <%= x * tww.game.views.Map.TILE_WIDTH %>px; top: <%= y * tww.game.views.Map.TILE_HEIGHT %>px; background-image: url('images/map-tiles/<%= tile.get('img') %>')\"></div>\n  <% }); %>\n</div>");
    JST['story_enter_text'] = _.template("<form class=\"story-enter-text-form\">\n  <input type=\"text\" class=\"story-enter-text-input\" autofocus=\"focus\">\n</form>");
    </script>
    <script>
      $(function() {
        tww.start({
          baseAjaxURL: 'http://www.playlablondon.com:4003',
          fayeURL:     'http://www.playlablondon.com:4003/faye'
        });
      });
    </script>
  </body>
</html>
